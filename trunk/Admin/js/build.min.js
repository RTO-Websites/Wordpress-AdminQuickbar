let AdminQuickbarActions={addPageToSwiftCache:function(a){a.preventDefault();let e=$(a.currentTarget),i=e.data("url");e.addClass("loading"),jQuery.post(aqbLocalize.ajaxUrl,{action:"swift_performance_single_prebuild",_wpnonce:e.closest(".admin-quickbar").data("swift-nonce"),url:i},(function(a){"success"===(a="string"==typeof a?JSON.parse(a):a).status&&e.addClass("is-in-cache"),e.removeClass("loading")}))},refreshSwiftCache:function(a){a.preventDefault();let e=$(a.currentTarget),i=e.data("url");e.addClass("loading"),jQuery.post(aqbLocalize.ajaxUrl,{action:"swift_performance_single_clear_cache",_wpnonce:e.closest(".admin-quickbar").data("swift-nonce"),url:i},(function(i){e.removeClass("is-in-cache"),AdminQuickbarActions.addPageToSwiftCache(a)}))},clearAllSwiftCache:function(a){a.preventDefault();let e=$(a.currentTarget);e.addClass("loading"),jQuery.post(aqbLocalize.ajaxUrl,{action:"swift_performance_clear_cache",type:"all",_wpnonce:e.closest(".admin-quickbar").data("swift-nonce")},(function(a){e.removeClass("loading")}))},checkSwiftCache:function(a){a.preventDefault(),a.stopPropagation(),$(a.currentTarget).hasClass("is-in-cache")?AdminQuickbarActions.refreshSwiftCache(a):AdminQuickbarActions.addPageToSwiftCache(a)},addToFavorites:function(a){let e=$(".admin-quickbar-post[data-postid="+a+"]"),i=$(".aqb-favorites .admin-quickbar-post[data-postid="+a+"]");e.addClass("is-favorite"),AdminQuickbarActions.buildFavoriteStorage(),i.length||(i=e.first().clone(),i.css({marginLeft:""}),$(".aqb-favorites .admin-quickbar-postlist-inner").append(i))},removeFromFavorites:function(a){let e=$(".admin-quickbar-post[data-postid="+a+"]"),i=$(".aqb-favorites .admin-quickbar-post[data-postid="+a+"]");e.removeClass("is-favorite"),AdminQuickbarActions.buildFavoriteStorage(),i.remove()},buildFavoriteStorage:function(){let a=[];$(".admin-quickbar-post.is-favorite").each((function(e,i){-1===a.indexOf($(i).data("postid"))&&a.push($(i).data("postid"))})),localStorage.adminQuickbarFavorites=JSON.stringify(a)},trashPost:function(a,e){let i=$(".admin-quickbar-post[data-postid="+e+"]"),t=i.data("trash-url"),n=i.data("untrash-url");i.hasClass("post-status-trash")?($.ajax(n),i.addClass("post-status-publish").removeClass("post-status-trash")):($.ajax(t),i.addClass("post-status-trash").removeClass("post-status-publish"))},startRenamePost:function(a,e){let i=$(".admin-quickbar-contextmenu").data("listitem").find(".aqb-post-title"),t=$('<span class="save-rename" />');$(".admin-quickbar .save-rename").remove(),$(".admin-quickbar .aqb-post-title").removeClass("is-renaming").prop("contenteditable",!1),t.on("click",(function(a){AdminQuickbarActions.saveRenamePost(e,i.text())})),i.addClass("is-renaming"),i.prop("contenteditable",!0),i.parent().find(".save-rename").remove(),i.after(t),i.focus()},saveRenamePost:function(a,e){let i=$(".aqb-post-title");$.post({url:aqbLocalize.ajaxUrl,data:{action:"aqbRenamePost",postid:a,title:e},success:function(){$(".admin-quickbar-post[data-postid="+a+"]").find(".aqb-post-title").html(e)}}),$(".save-rename").remove(),i.prop("contenteditable",!1),i.removeClass("is-renaming")},openWindow:function(){let a=$(this).next(".dashicons-edit").attr("href")+"&noaqb";AdminQuickbarActions.registerCssWindow(a)},registerCssWindow:function(a){!window.globalCssWindow||window.globalCssWindow.closed?window.globalCssWindow=window.open(a,"rto_wp_adminQuickbar","width=700,height=500,left=200,top=100"):window.globalCssWindow.location.href!==a&&window.globalCssWindow.location.assign(a),window.globalCssWindow.focus()}},AdminQuickbar=function(){let a,e,i,t,n,o,s,c,r,d=window.document,l=$(d),u=this,m=$("body");a=function(){$((function(a){e()})),s(),l.on("click",".toggle-quickbar-button",u.toggleSidebar),l.on("click",".admin-quickbar-post-type",u.togglePostTypes),l.on("click",".aqb-tab-button",u.changeTab),l.on("mouseenter",".aqb-toolbar-item",u.showIndicator),l.on("mouseleave",".aqb-toolbar-item",u.hideIndicator),l.on("change",".admin-quickbar-keepopen input",(function(a){localStorage.adminQuickbarKeepopen=$(".admin-quickbar-keepopen input").is(":checked")})),l.on("change",".admin-quickbar-theme select",u.changeTheme),l.on("change",".admin-quickbar-hide-on-website input",(function(a){$(".admin-quickbar-hide-on-website input").is(":checked")?m.addClass("aqb-hide-on-website"):m.removeClass("aqb-hide-on-website"),u.saveSettings()})),l.on("change",".admin-quickbar-overlap input",u.checkOverlap),l.on("change",".admin-quickbar-show-trash-option input",u.checkTrash),l.on("change",".admin-quickbar-show-postids input",u.checkShowPostIds),l.on("change",".admin-quickbar-loadthumbs input",u.checkThumbs),l.on("click",".language-switch .language-flag, .language-switch .language-all",u.changeLanguageFilter),l.on("change",".aqb-input-hide-posttypes",(function(){u.updateHiddenPostTypes()})),l.on("keydown",(function(a){r(a)})),"true"===localStorage.adminQuickbarOverlap&&m.addClass("admin-quickbar-is-overlap"),u.checkTheme(),i=new AdminQuickbarContextMenu,c=new AdminQuickbarSearch},s=function(){void 0===localStorage.adminQuickbarKeepopen&&(localStorage.adminQuickbarKeepopen="true"),void 0===localStorage.adminQuickbarToggle&&(localStorage.adminQuickbarToggle="false"),void 0===localStorage.adminQuickbarLanguageFilter&&(localStorage.adminQuickbarLanguageFilter="all")},e=function(){n(),o(),"true"===localStorage.adminQuickbarToggle&&"true"===localStorage.adminQuickbarKeepopen&&($(".admin-quickbar").addClass("toggle"),m.addClass("admin-quickbar-visible"),u.checkElementorNavigator()),"true"===localStorage.adminQuickbarKeepopen&&$(".admin-quickbar-keepopen input").prop("checked",!0),$(".admin-quickbar-loadthumbs input").is(":checked")&&u.loadThumbs(),"true"===localStorage.adminQuickbarOverlap&&($(".admin-quickbar-overlap input").prop("checked",!0),m.addClass("admin-quickbar-is-overlap")),"true"===localStorage.adminQuickbarShowTrash&&($(".admin-quickbar-show-trash-option input").prop("checked",!0),m.addClass("admin-quickbar-show-trash")),"true"===localStorage.adminQuickbarShowPostIds&&($(".admin-quickbar-show-postids input").prop("checked",!0),m.addClass("aqb-show-postids")),u.checkTheme(),u.setLanguageSwitchActiveClass(),u.hideByLanguage(),u.checkElementorNavigator();let a=$("#elementor-preview-iframe");a.length&&a.on("load",(function(){$(a.get(0).contentDocument).on("keydown",(function(a){r(a)})),setTimeout((function(){u.checkElementorNavigator()}),2e3)}))},u.saveSettings=function(){let a={hiddenPostTypes:$(".aqb-input-hide-posttypes").val()??[],loadThumbs:$(".admin-quickbar-loadthumbs input").is(":checked"),hideOnWebsite:$(".admin-quickbar-hide-on-website input").is(":checked")};$.post(aqbLocalize.ajaxUrl,{action:"aqb_save_settings",aqbSettings:a},(function(a){console.log("aqb_save_settings",a)}),"json")},u.checkTheme=function(){let a=$(".admin-quickbar-theme select");switch(localStorage.adminQuickbarTheme){case"light":a.val("light"),m.removeClass("admin-quickbar-is-darkmode");break;case"dark":a.val("dark"),m.addClass("admin-quickbar-is-darkmode");break;default:a.val("auto");let e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=window.matchMedia("(prefers-color-scheme: light)").matches,t=window.matchMedia("(prefers-color-scheme: no-preference)").matches;e||!e&&!i&&!t||t?m.addClass("admin-quickbar-is-darkmode"):m.removeClass("admin-quickbar-is-darkmode")}localStorage.adminQuickbarTheme||"true"!==localStorage.adminQuickbarDarkmode||m.addClass("admin-quickbar-is-darkmode")},u.updateHiddenPostTypes=function(){u.saveSettings(),u.hidePostTypes()},u.hidePostTypes=function(){let a=$(".aqb-input-hide-posttypes").val();$(".admin-quickbar-postlist").removeClass("hidden-posttype");for(let e in a)$('.admin-quickbar-postlist[data-post-type="'+a[e]+'"]').addClass("hidden-posttype")},u.changeLanguageFilter=function(a){let e=$(a.currentTarget).data("language-code");localStorage.adminQuickbarLanguageFilter=e,u.setLanguageSwitchActiveClass(),u.hideByLanguage()},u.hideByLanguage=function(){let a=localStorage.adminQuickbarLanguageFilter;$(".admin-quickbar-post").removeClass("hidden-by-language"),"all"!=a&&$(".admin-quickbar-post .language-flag").each((function(e,i){let t=$(i);t.data("language-code")!==a&&t.closest(".admin-quickbar-post").addClass("hidden-by-language")}))},u.setLanguageSwitchActiveClass=function(){let a=localStorage.adminQuickbarLanguageFilter;$(".admin-quickbar .language-switch .language-all,.admin-quickbar .language-switch .language-flag").removeClass("active"),$('.admin-quickbar .language-switch [data-language-code="'+a+'"]').addClass("active")},u.changeTab=function(a){let e=$(a.currentTarget),i=e.data("tab");$(".aqb-tab-button, .aqb-tab").removeClass("active"),e.addClass("active"),$(".aqb-tab-"+i).addClass("active")},r=function(a){if(!a.ctrlKey&&!a.metaKey||!a.shiftKey)return;let e=a.key?a.key.toLowerCase():"";if(!e&&a.keyCode)switch(a.keyCode){case 60:case 220:e="<";break;case 70:e="f"}switch(e){case"f":m.hasClass("admin-quickbar-visible")||u.toggleSidebar(),$("#aqb-search").focus();break;case">":case"<":case"|":a.preventDefault(),u.toggleSidebar()}},o=function(){localStorage.adminQuickbarMaxRecent||(localStorage.adminQuickbarMaxRecent=4),$(".admin-quickbar-max-recent input").val(localStorage.adminQuickbarMaxRecent),l.on("change",".admin-quickbar-max-recent input",(function(a){localStorage.adminQuickbarMaxRecent=$(".admin-quickbar-max-recent input").val()}));let a=[],e=[],i=parseInt(localStorage.adminQuickbarMaxRecent),t=0,n=$(".admin-quickbar").data("current-post");void 0!==localStorage.adminQuickbarRecent&&(a=JSON.parse(localStorage.adminQuickbarRecent)),n&&a.unshift(n);for(let n in a){if(-1!==e.indexOf(a[n]))continue;e.push(a[n]),t+=1;let o=$(".admin-quickbar-post[data-postid="+a[n]+"]").first().clone();if(o.css({marginLeft:""}),$(".aqb-recent .admin-quickbar-postlist-inner").append(o),t>=i)break}localStorage.adminQuickbarRecent=JSON.stringify(e)},n=function(){let a=[];void 0!==localStorage.adminQuickbarFavorites&&(a=JSON.parse(localStorage.adminQuickbarFavorites));for(let e in a){let i=$(".admin-quickbar-post[data-postid="+a[e]+"]");i.addClass("is-favorite");let t=i.first().clone();t.css({marginLeft:""}),$(".aqb-favorites .admin-quickbar-postlist-inner").append(t)}},u.checkOverlap=function(a){localStorage.adminQuickbarOverlap=$(".admin-quickbar-overlap input").is(":checked"),"true"===localStorage.adminQuickbarOverlap?m.addClass("admin-quickbar-is-overlap"):m.removeClass("admin-quickbar-is-overlap")},u.checkTrash=function(a){localStorage.adminQuickbarShowTrash=$(".admin-quickbar-show-trash-option input").is(":checked"),"true"===localStorage.adminQuickbarShowTrash?m.addClass("admin-quickbar-show-trash"):m.removeClass("admin-quickbar-show-trash")},u.checkShowPostIds=function(a){localStorage.adminQuickbarShowPostIds=$(".admin-quickbar-show-postids input").is(":checked"),"true"===localStorage.adminQuickbarShowPostIds?m.addClass("aqb-show-postids"):m.removeClass("aqb-show-postids")},u.changeTheme=function(a){localStorage.adminQuickbarTheme=$(".admin-quickbar-theme select").val(),u.checkTheme()},u.checkThumbs=function(a){u.saveSettings(),$(".admin-quickbar-loadthumbs input").is(":checked")?u.loadThumbs():$(".admin-quickbar .wp-post-image").prop("src","")},u.toggleSidebar=function(){let a=$(".admin-quickbar");a.toggleClass("toggle"),m.toggleClass("admin-quickbar-visible"),localStorage.adminQuickbarToggle=a.hasClass("toggle"),u.checkElementorNavigator()},u.togglePostTypes=function(a){$(a.target).parent().toggleClass("show-list"),t()},t=function(){let a={};$(".admin-quickbar-postlist").each((function(e,i){let t=$(i);a[t.data("post-type")]=t.hasClass("show-list")})),localStorage.postList=JSON.stringify(a)},u.getPostListStorage=function(){return localStorage.postList&&"string"==typeof localStorage.postList||(localStorage.postList="{}"),JSON.parse(localStorage.postList)},u.loadThumbs=function(){$(".admin-quickbar .wp-post-image").each((function(a,e){let i=$(e);i.prop("src",i.data("src"))}))},u.showIndicator=function(a){let e=$(a.currentTarget),i=$(".admin-quickbar-toolbar");$(".aqb-toolbar-indicator").html(e.data("title")),i.addClass("show-indicator")},u.hideIndicator=function(a){$(a.currentTarget);let e=$(".admin-quickbar-toolbar");$(".aqb-toolbar-indicator");e.removeClass("show-indicator")},u.checkElementorNavigator=function(){let a=$("#elementor-navigator");a.length&&m.hasClass("admin-quickbar-visible")&&!m.hasClass("elementor-navigator-docked")&&(window.innerWidth-(a.offset().left+a.width())>=320||a.css({left:window.innerWidth-a.width()-320}))},a()},AdminQuickbarContextMenu=function(){let a,e,i,t,n,o,s,c,r,d,l=window.document,u=$(l);d=function(){u.on("contextmenu",".aqb-icon",(function(a){a.stopPropagation()})),u.on("contextmenu",".admin-quickbar-post",e),u.on("click",a),u.on("click",".aqb-icon-swift:not(.clear-all)",AdminQuickbarActions.checkSwiftCache),u.on("click",".aqb-icon-swift.clear-all",AdminQuickbarActions.clearAllSwiftCache),u.on("click",".aqb-icon-external",AdminQuickbarActions.openWindow)},e=function(a){a.preventDefault();let e=$(a.currentTarget),t=$(".admin-quickbar-contextmenu"),n=$(".admin-quickbar-inner").scrollTop()+e.offset().top-$(".admin-quickbar").offset().top+35;t.data("postid",e.data("postid")),t.data("listitem",e),i(e.data("contextmenu")),t.css({top:n+"px"}),t.addClass("open")},i=function(a){let e=$(".admin-quickbar-contextmenu");e.html("");for(let i in a)switch(i){case"favorite":e.append(o(a[i]));break;case"copy":e.append(t(a[i]));break;case"swift":e.append(n(a[i]));break;case"trash":e.append(s(a[i]));break;case"rename":e.append(c(a[i]))}},n=function(a){let e,i=$('<div class="item has-sub item-swift" />');$(".admin-quickbar-contextmenu");return i.append('<span class="label">Swift</span>'),e=$('<div class="item subitem" />'),e.addClass("aqb-icon aqb-icon-swift"),a.inCache&&e.addClass("is-in-cache"),e.prop("title","Refresh swift cache"),e.data("url",a.permalink),i.append(e),i},s=function(a){let e,i=$('<div class="item has-sub item-trash" />'),t=$(".admin-quickbar-contextmenu").data("postid");return i.append('<span class="label">(Un)Trash</span>'),e=$('<div class="item subitem" />'),e.addClass("aqb-icon aqb-icon-trash"),e.prop("title","(Un)Trash"),i.on("click",(function(a){AdminQuickbarActions.trashPost(a,t)})),i.append(e),i},c=function(a){let e,i=$('<div class="item has-sub item-rename" />'),t=$(".admin-quickbar-contextmenu").data("postid");return i.append('<span class="label">Rename</span>'),e=$('<div class="item subitem" />'),e.addClass("aqb-icon aqb-icon-rename"),e.prop("title","Rename"),i.on("click",(function(a){AdminQuickbarActions.startRenamePost(a,t)})),i.append(e),i},o=function(a){let e,i=$('<div class="item has-sub item-favorite" />'),t=$(".admin-quickbar-contextmenu").data("postid"),n=$(".admin-quickbar-post[data-postid="+t+"]");return i.append('<span class="label">Favorite</span>'),e=$('<div class="item subitem aqb-icon" />'),e.addClass("aqb-icon aqb-icon-favorite"),n.hasClass("is-favorite")?(e.addClass("aqb-icon-favorite-alt"),e.prop("title","Remove from favorites"),i.on("click",(function(a){AdminQuickbarActions.removeFromFavorites(t)}))):(e.addClass("aqb-icon-favorite"),e.prop("title","Add to favorites"),i.on("click",(function(a){AdminQuickbarActions.addToFavorites(t)}))),i.append(e),i},t=function(a){let e,i,t=$('<div class="item has-sub item-copy" />');t.append('<span class="label">Copy</span>');for(let n in a)a[n]&&(i=$('<div class="item subitem" />'),i.on("click",(function(a){a.stopPropagation();let e=$(a.currentTarget).find("input");e.focus(),e.select(),document.execCommand("copy")})),i.addClass("item-"+n),i.addClass("aqb-icon aqb-icon-"+n),r(i,n),e=$('<input type="text" class="hidden-copy-input" />'),e.val(a[n]),i.append(e),t.append(i));return t},a=function(){$(".admin-quickbar-contextmenu").removeClass("open")},r=function(a,e){let i;switch(e){case"id":i="ID";break;case"wordpress":i="WP-Edit-URL";break;case"elementor":i="Elementor-URL";break;case"shortcode":i="Elementor Shortcode";break;case"website":i="Website-URL";break;default:i=e.charAt(0).toUpperCase()+e.slice(1)}a.prop("title",i)},d()},AdminQuickbarSearch=function(){let a,e,i,t,n,o=window,s=o.document;n=function(){$((function(a){t()})),$(s).on("keyup input change","#aqb-search",a)},t=function(){i(),a()},a=function(a){let t=$("#aqb-search").val().toLowerCase(),n=$(".admin-quickbar-post");n.removeClass("aqb-search-hidden"),n.each((function(a,e){let i=$(e),n=i.find(".label").text().toLowerCase(),o=i.data("postid");-1===n.indexOf(t)&&o!==parseInt(t)&&i.addClass("aqb-search-hidden")})),t.length&&e(),t.length||i()},e=function(){let a=$(".admin-quickbar-postlist");a.removeClass("aqb-search-hidden"),a.each((function(a,e){let i=$(e);i.find(".admin-quickbar-post:not(.aqb-search-hidden)").length?i.addClass("show-list"):i.addClass("aqb-search-hidden")}))},i=function(){let a=o.adminQuickbarInstance.getPostListStorage(),e=$(".admin-quickbar-postlist");e.removeClass("show-list"),e.each((function(e,i){let t=$(i);a[t.data("post-type")]&&t.addClass("show-list")}))},n()};"undefined"==typeof $&&(window.$=jQuery),window.adminQuickbarInstance=new AdminQuickbar;